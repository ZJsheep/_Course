## Intro
- OS history
	- 1945s - 1955s 真空管
	- 1950 发明了打孔纸带
	- 1955s 晶体管和批处理系统
	- 1965s - 1980s：IC 和多道程序
	- 分时操作系统（并发）
	- future
		- 通用操作系统？
		- AI 操作系统？
		- VR AR OS
- Operating system definition
	- 运行在内核态的软件（？
- Why and how should we learn OS
	- why
		- 关联软硬件

- Hardware
- Operating system zoo


## Outline
- Abstraction vs Virtualization
	- A: a simplified representation
	- V: offer virtual resources

- Threads
	- abstraction of cpu
- Address Spaces
- File
	- Tree-shape file system
	- Mounted file system
	- Pseudofile: pipe, stored only in RAM
- Process:
	- threads & addr space & file
	- state
		- running
		- ready
		- blocked
- I/O
- Shell
	- (machine name): (work dir)($/#. $ for normal user and # for root)
- CPU Protection
	- ![[操作系统OS/attachments/Pasted image 20220223091639.png]]
	- Model Switch
		- Interrupt vector table：记录中断处理程序的首地址
		- ![[操作系统OS/attachments/Pasted image 20220223092700.png]]
		- Passing Parameters
- UNIX System calls
	- Process
	- File
	- Directory
	- Miscellaneous
	- The Strace command
		- use ptrace system call
- Windows Win32 API
- User-level Upcall
	- Examples:
		- 异步 IO
			- 当 IO 完成时通知一个进程
		- 跨进程通信
		- 用户发出的进程异常
			- ![[操作系统OS/attachments/Pasted image 20220225105117.png]]
	- 本质上是对 interrupt 的虚拟化
		- ![[操作系统OS/attachments/Pasted image 20220225110201.png]]
		- 问题：如何使 Ctrl-C 失效？
		- Interrupt masking:
			- 可以用来关中断

## Outlines
### Structure ✔
- Monolithic Systems 单体系统
	- 整个操作系统在内核态以单一程序的方式运行
- Layered Systems 层次式系统
- Macro Kernal & Micro Kernal 微内核
	- Macro Kernal: 所有的东西都在内核态
	- Micro Kernal: 各个功能都是在用户态，真正的内核很小
	- 将操作系统划分成很多小模块，只有其中一个模块即微内核运行在内核态，其余全部运行在用户态
> 机制和策略
> - 策略是要做什么
> - 机制是具体实现
- Client Server Model 客户端-服务器模式
	- 将进程划分为客户端和服务器两类，客户端进程索取需要的服务，将其发给合适的服务器，服务器进程为其提供服务
	- ![操作系统OS/attachments/Pasted image 20220225113407.png](%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9FOS/attachments/Pasted%20image%2020220225113407.png)
- Virtual Machines 虚拟机 ![[操作系统OS/attachments/Pasted image 20220225113531.png]]
- 外核
	- 有一个运行在内核态的外核，用来对运行在物理机上的多个虚拟机进行资源分配
### C world
- Make
### Research
### Review
